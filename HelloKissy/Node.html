<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>helloKissy</title>
<script data-config="{combine:true}" src="http://g.tbcdn.cn/kissy/k/1.3.1/seed.js"></script>

</head>

<body>
<div style="height: 500px;" class="demo">
     <style>
         .demo {
             position: relative;
         }
         .good-student {
             background:none repeat scroll 0 0 #E6FFFF;
             border:1px solid #CCCCCC;
             float:left;
             padding:5px;
             position:absolute;
         }
         #taobao {
             height:300px;
             left:50px;
             position:absolute;
             top:200px;
             width:700px;
         }
         #dest {
             border:1px dashed #CCCCCC;
             bottom:0;
             height:200px;
             position:absolute;
             right:0;
             width:200px;
         }
     </style>
     <button id="go">Go!</button>

     <div class="good-student">Alan Turing</div>
     <div class="good-student">You</div>
     <div class="good-student">马云</div>
     <div class="good-student">Bill Gates</div>
     <div class="good-student">Ted Hoff</div>
     <div class="good-student">Steve Wozniak</div>
     <div class="good-student">Bob Bemer</div>
     <div class="good-student">Gary Kildall</div>
     <div class="good-student">Vint Cerf</div>
     <div class="good-student">老陆</div>

     <div id="taobao"><div id="dest"></div></div>

     <script>
   KISSY.use('dom,event,node',function (S,DOM,Event,Node) {
            var timers = [];

            var i_can_fly = function(self) {
                var targetX = 500, targetY = 100,
                    maxX = 650, maxY = 250;

                S.each(self, function(item, i) {
                    var x = 0, y = 0, speed = Math.random() * 80;
                    timers[i] = S.later(function() {
                        x += Math.random() * speed * (x > maxX ? -1 : 1);
                        y += Math.random() * speed * (y > maxY ? -1 : 1);
                        DOM.css(item, { left: x, top: y });
                        if(x > targetX && y > targetY && x < maxX && y < maxY) {
                            timers[i].cancel();
                        }
                    }, 100, true);
                });
            };

            Node.one('#go').on('click', function() {
                S.each(timers, function(timer) { timer.cancel() });
                i_can_fly(Node.all('.good-student').appendTo('#taobao'));
            });
        })
     </script>

</div>

</body>
</html>
